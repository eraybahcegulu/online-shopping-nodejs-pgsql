<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Registration</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container mt-5">
    <h2>Customer Registration Form</h2>
    <form action="/customerAdd" method="post">
        <div class="mb-3">
            <label for="name" class="form-label">Name:</label>
            <input type="text" class="form-control" id="name" name="name" placeholder="Enter your first name">
        </div>
        <div class="mb-3">
            <label for="surname" class="form-label">Surname:</label>
            <input type="text" class="form-control" id="surname" name="surname" placeholder="Enter your surname">
        </div>
        <div class="mb-3">
            <label for="email" class="form-label">Email:</label>
            <input type="email" class="form-control" id="email"  name="email" placeholder="Enter your email">
        </div>
        <div class="mb-3">
            <label for="password" class="form-label">Password:</label>
            <input type="password" class="form-control" id="password" name="password" placeholder="Enter your password">
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
    <div id="customerAddMessage" class="mt-3">
    </div>
</div>

<script>
    var customerAddMessage = document.getElementById("customerAddMessage");

    document.querySelector('form').addEventListener('submit', function (event) {
        event.preventDefault(); // Formdaki submiti engelliyoruz ve fetch api gerçekleştiriyoruz

        fetch('/customerAdd', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                name: document.getElementById('name').value,
                surname: document.getElementById('surname').value,
                email: document.getElementById('email').value,
                password: document.getElementById('password').value,
            }),
        })
        .then(response => response.json())
        .then(data => {
            if (data.newCustomer) {
                customerAddMessage.innerHTML = '<p>Kayıt başarılı</p>';
            } else {
                customerAddMessage.innerHTML = '<p>Kayıt başarısız</p>';
            }
        })
        .catch((error) => {
            console.error('Error:', error);
        });
    });
</script>

</body>
</html>